# Mega accounts for integration tests

Integration tests require a specific layout. It can be generated by following the following steps and updating the `inputs.json` file. 

### Accounts creation
Two account are required to generate this layout. You should create the accounts on https://mega.nz website
```
Account1 = megaapiclient4@yopmail.com
Account2 = megaapiclient4-share@yopmail.com
```

### Install megacmd and launch the server
```
scoop install megacmd
."$env:USERPROFILE\scoop\apps\megacmd\current\MEGAcmdServer.exe"
```

### Launch megacmd
```
."$env:USERPROFILE\scoop\apps\megacmd\current\MEGAcmdShell.exe"
```

### Layout
```
    +-Root
    |   +-SharedFolder                          (Outgoing Share)
    |       |-SharedFile.jpg
    |       +-SharedSubFolder                   (Outgoing Share)
    |           |-SharedFileUpSideDown.jpg
    +-Trash
    +-Inbox
    +-Contacts
      +-SharedRemoteFolder                      (Incoming Share)
        |-SharedRemoteFile.jpg
        +-SharedRemoteSubFolder                 (Incoming Share / Subfolder of SharedRemoteFolder)
          |-SharedRemoteSubFile.jpg
          +-SharedRemoteSubSubFolder
```


### Layout configuration
```
login [ACCOUNT2] [PASSWORD2]

mkdir SharedRemoteFolder
cd SharedRemoteFolder
put Data\SampleFile.jpg SharedRemoteFile.jpg
mkdir SharedRemoteSubFolder
cd SharedRemoteSubFolder
put Data\SampleFile.jpg SharedRemoteSubFile.jpg
mkdir SharedRemoteSubSubFolder
cd
share -a --with=[ACCOUNT1] SharedRemoteFolder

logout
```

```
login [ACCOUNT1] [PASSWORD1]

rm "Welcome to MEGA.pdf"
put SampleZipFile.zip SampleZipFile.zip
mkdir SharedFolder
cd SharedFolder
put Data\SampleFile.jpg SharedFile.jpg
preview -s SharedFile.jpg Data\SampleFile_preview.jpg
thumbnail -s SharedFile.jpg Data\SampleFile_thumbnail.jpg
mkdir SharedSubFolder
cd SharedSubFolder
put Data\SampleFileUpSideDown.jpg SharedFileUpSideDown.jpg

cd
export -a -f SharedFolder
export -a -f SharedFolder/SharedFile.jpg
export -a -f SampleZipFile.zip

showpcr
ipc [ACCOUNT2] -a

# Commands used to retrieve the required informations 
ls --tree --show-handles -aaa
ls --tree --show-handles -aaa [ACCOUNT2]:SharedRemoteFolder

# Command used to retrieve the masterkey
masterkey

logout
```

Once the layout is created, the file `inputs.json` should be updated accordingly